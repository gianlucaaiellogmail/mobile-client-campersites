<ion-view view-title="{{'label.modificaarea' | translate}}">
	<ion-content padding="false" class="has-header" overflow-scroll="true">
		<div class="list card" ng-show="!onlineOK">
			<a href="" class="item item-icon-left item-text-wrap" ng-click="online()">
				<i class="icon ion-ios-information-outline"></i>
				<h2>{{'label.onlineOK' | translate}}</h2>
				<p>{{'desc.onlineOK' | translate}}</p>
			</a>
		</div>
<!--	<leaflet ng-show="onlineOK" data-tap-disabled="true" defaults="defaultsMap" center="centerMap" layers="layersMap" markers="markersMap" maxbounds="maxboundsMap" width="100%" height="200px"></leaflet> -->
		<div class="card" ng-show="onlineOK">
			<a class="item item-icon-left" href="" ng-click="rilevaPosizione()">
    			<i class="icon ion-pinpoint positive"></i>
			  	{{'label.rilevaposizione' | translate}}
			</a>
		</div>
		<form name="formModify" novalidate="novalidate" ng-show="onlineOK">
			<input type="hidden" name="StopId" ng-model="stopPoint.stopId" />
			<input type="hidden" name="NationHidden" ng-model="stopPoint.nation" />
<!--		<pre>{{stopPoint | json}}</pre> -->
			<div class="list card">
				<div class="item item-divider">
					{{'label.generalinformation' | translate}}
				</div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.LatitudeHidden.$invalid && formModify.$submitted, 'valid-lr': formModify.LatitudeHidden.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.latitude</span>
				  <input type="text" name="LatitudeHidden" ng-model="stopPoint.latitude" required pattern="^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)$">
				</label>
				<div class="form-errors" ng-show="formModify.LatitudeHidden.$error && formModify.$submitted" ng-messages="formModify.LatitudeHidden.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.LongitudeHidden.$invalid && formModify.$submitted, 'valid-lr': formModify.LongitudeHidden.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.longitude</span>
				  <input type="text" name="LongitudeHidden" ng-model="stopPoint.longitude" required pattern="^[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)$">
				</label>
				<div class="form-errors" ng-show="formModify.LongitudeHidden.$error && formModify.$submitted" ng-messages="formModify.LongitudeHidden.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.Description.$invalid && formModify.$submitted, 'valid-lr': formModify.Description.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.description</span>
				  <input type="text" name="Description" ng-model="stopPoint.description" ng-maxlength="100" required>
				</label>
				<div class="form-errors" ng-show="formModify.Description.$error && formModify.$submitted" ng-messages="formModify.Description.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.LocalityHidden.$invalid && formModify.$submitted, 'valid-lr': formModify.LocalityHidden.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.locality</span>
				  <input type="text" name="LocalityHidden" ng-model="stopPoint.locality" ng-maxlength="100" required>
				</label>
				<div class="form-errors" ng-show="formModify.LocalityHidden.$error && formModify.$submitted" ng-messages="formModify.LocalityHidden.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.TypeId.$invalid && formModify.$submitted, 'valid-lr': formModify.TypeId.$valid && formModify.$submitted}">
					<span class="input-label" translate>label.tipososta</span>
					<select name="TypeId" ng-model="stopPoint.typeId" required>
						<option value="AA" translate>label.AA</option>
						<option value="PS" translate>label.PS</option>
						<option value="CS" translate>label.CS</option>
						<option value="AC" translate>label.AC</option>
						<option value="CA" translate>label.CA</option>
					</select>
				</label>
				<div class="form-errors" ng-show="formModify.TypeId.$error && formModify.$submitted" ng-messages="formModify.TypeId.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.Homepage.$invalid && formModify.$submitted, 'valid-lr': formModify.Homepage.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.homepage</span>
				  <input type="text" name="Homepage" ng-model="stopPoint.homepage" ng-maxlength="100">
				</label>
				<div class="form-errors" ng-show="formModify.Homepage.$error && formModify.$submitted" ng-messages="formModify.Homepage.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.Telefono.$invalid && formModify.$submitted, 'valid-lr': formModify.Telefono.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.telefono</span>
				  <input type="tel" name="Telefono" ng-model="stopPoint.telefono" ng-maxlength="45" pattern="^[\+]+\d+$">
				</label>
				<div class="form-errors" ng-show="formModify.Telefono.$error && formModify.$submitted" ng-messages="formModify.Telefono.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.Chiusura.$invalid && formModify.$submitted, 'valid-lr': formModify.Chiusura.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.chiusuraperiodo</span>
				  <input type="text" name="Chiusura" ng-model="stopPoint.chiusura" ng-maxlength="11" pattern="^[0-3][0-9]/[0-1][0-9]-[0-3][0-9]/[0-1][0-9]$">
				</label>
				<div class="form-errors" ng-show="formModify.Chiusura.$error && formModify.$submitted" ng-messages="formModify.Chiusura.$error" ng-messages-include="includes/form_errors.html"></div>
			</div>
			<div class="list card">
				<div class="item item-divider item-text-wrap">
					{{'label.costsandservices' | translate}}
				</div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.PrezzoNotturno.$invalid && formModify.$submitted, 'valid-lr': formModify.PrezzoNotturno.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.prezzoNotturno</span>
				  <input type="text" name="PrezzoNotturno" ng-model="stopPoint.prezzoNotturno" pattern="^-?\d+\.?\d*$">
				</label>
				<div class="form-errors" ng-show="formModify.PrezzoNotturno.$error && formModify.$submitted" ng-messages="formModify.PrezzoNotturno.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.PrezzoOrario.$invalid && formModify.$submitted, 'valid-lr': formModify.PrezzoOrario.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.prezzoOrario</span>
				  <input type="text" name="PrezzoOrario" ng-model="stopPoint.prezzoOrario" pattern="^-?\d+\.?\d*$">
				</label>
				<div class="form-errors" ng-show="formModify.PrezzoOrario.$error && formModify.$submitted" ng-messages="formModify.PrezzoOrario.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.PrezzoGiornaliero.$invalid && formModify.$submitted, 'valid-lr': formModify.PrezzoGiornaliero.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.prezzoGiornaliero</span>
				  <input type="text" name="PrezzoGiornaliero" ng-model="stopPoint.prezzoGiornaliero" pattern="^-?\d+\.?\d*$">
				</label>
				<div class="form-errors" ng-show="formModify.PrezzoGiornaliero.$error && formModify.$submitted" ng-messages="formModify.PrezzoGiornaliero.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.PrezzoSettimanale.$invalid && formModify.$submitted, 'valid-lr': formModify.PrezzoSettimanale.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.prezzoSettimanale</span>
				  <input type="text" name="PrezzoSettimanale" ng-model="stopPoint.prezzoSettimanale" pattern="^-?\d+\.?\d*$">
				</label>
				<div class="form-errors" ng-show="formModify.PrezzoSettimanale.$error && formModify.$submitted" ng-messages="formModify.PrezzoSettimanale.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.PrezzoParticolare.$invalid && formModify.$submitted, 'valid-lr': formModify.PrezzoParticolare.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.prezzoParticolare</span>
				  <input type="text" name="PrezzoParticolare" ng-model="stopPoint.prezzoParticolare" ng-maxlength="200">
				</label>
				<div class="form-errors" ng-show="formModify.PrezzoParticolare.$error && formModify.$submitted" ng-messages="formModify.PrezzoParticolare.$error" ng-messages-include="includes/form_errors.html"></div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.acqua</span>
				  	<div class="button-bar">
			  			<input type="hidden" name="Acqua" ng-model="stopPoint.acqua" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.acqua = button.value" ng-class="{'active' : button.value === stopPoint.acqua}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.scaricoCassetta</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="ScaricoCassetta" ng-model="stopPoint.scaricoCassetta" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.scaricoCassetta = button.value" ng-class="{'active' : button.value === stopPoint.scaricoCassetta}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.scaricoPozzetto</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="ScaricoPozzetto" ng-model="stopPoint.scaricoPozzetto" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.scaricoPozzetto = button.value" ng-class="{'active' : button.value === stopPoint.scaricoPozzetto}">{{button.text}}</a>
					</div>
				</div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.LatitudeHidden.$invalid && formModify.$submitted, 'valid-lr': formModify.LatitudeHidden.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.prezzoService</span>
				  <input type="text" name="PrezzoService" ng-model="stopPoint.prezzoService" pattern="^-?\d+\.?\d*$">
				</label>
				<div class="form-errors" ng-show="formModify.PrezzoService.$error && formModify.$submitted" ng-messages="formModify.PrezzoService.$error" ng-messages-include="includes/form_errors.html"></div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.corrente</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Corrente" ng-model="stopPoint.corrente" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.corrente = button.value" ng-class="{'active' : button.value === stopPoint.corrente}">{{button.text}}</a>
					</div>
				</div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.LatitudeHidden.$invalid && formModify.$submitted, 'valid-lr': formModify.LatitudeHidden.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.prezzoCorrente</span>
				  <input type="text" name="PrezzoCorrente" ng-model="stopPoint.prezzoCorrente" pattern="^-?\d+\.?\d*$">
				</label>
				<div class="form-errors" ng-show="formModify.PrezzoCorrente.$error && formModify.$submitted" ng-messages="formModify.PrezzoCorrente.$error" ng-messages-include="includes/form_errors.html"></div>
			</div>
			<div class="list card">
				<div class="item item-divider">
					{{'label.additionalservices' | translate}}
				</div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.LatitudeHidden.$invalid && formModify.$submitted, 'valid-lr': formModify.LatitudeHidden.$valid && formModify.$submitted}">
					<span class="input-label" translate>label.tipoPiazzola</span>
					<select name="TipoPiazzola" ng-model="stopPoint.tipoPiazzola" required>
						<option value="ST" translate>label.ST</option>
						<option value="AS" translate>label.AS</option>
						<option value="ER" translate>label.ER</option>
						<option value="MA" translate>label.MA</option>
					</select>
				</label>
				<div class="form-errors" ng-show="formModify.TipoPiazzola.$error && formModify.$submitted" ng-messages="formModify.TipoPiazzola.$error" ng-messages-include="includes/form_errors.html"></div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.accessoCustodito</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="AccessoCustodito" ng-model="stopPoint.accessoCustodito" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.accessoCustodito = button.value" ng-class="{'active' : button.value === stopPoint.accessoCustodito}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.videosorveglianza</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Videosorveglianza" ng-model="stopPoint.videosorveglianza" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.videosorveglianza = button.value" ng-class="{'active' : button.value === stopPoint.videosorveglianza}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.notte</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Notte" ng-model="stopPoint.notte" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.notte = button.value" ng-class="{'active' : button.value === stopPoint.notte}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.illuminazione</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Illuminazione" ng-model="stopPoint.illuminazione" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.illuminazione = button.value" ng-class="{'active' : button.value === stopPoint.illuminazione}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.ombra</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Ombra" ng-model="stopPoint.ombra" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.ombra = button.value" ng-class="{'active' : button.value === stopPoint.ombra}">{{button.text}}</a>
					</div>
				</div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.LatitudeHidden.$invalid && formModify.$submitted, 'valid-lr': formModify.LatitudeHidden.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.posti</span>
				  <input type="number" name="Posti" ng-model="stopPoint.posti" pattern="^\d+$">
				</label>
				<div class="form-errors" ng-show="formModify.Posti.$error && formModify.$submitted" ng-messages="formModify.Posti.$error" ng-messages-include="includes/form_errors.html"></div>
				<label class="item item-input item-stacked-label" ng-class="{'has-error-lr': formModify.LatitudeHidden.$invalid && formModify.$submitted, 'valid-lr': formModify.LatitudeHidden.$valid && formModify.$submitted}">
				  <span class="input-label" translate>label.maxHH</span>
				  <input type="number" name="MaxHH" ng-model="stopPoint.maxHH" pattern="^\d+$">
				</label>
				<div class="form-errors" ng-show="formModify.MaxHH.$error && formModify.$submitted" ng-messages="formModify.MaxHH.$error" ng-messages-include="includes/form_errors.html"></div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.docce</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Docce" ng-model="stopPoint.docce" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.docce = button.value" ng-class="{'active' : button.value === stopPoint.docce}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.bagni</span>
				  	<div class="button-bar">
						<input type="hidden" name="Bagni" ng-model="stopPoint.bagni" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.bagni = button.value" ng-class="{'active' : button.value === stopPoint.bagni}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.bambini</span>
				  	<div class="button-bar">
						<input type="hidden" name="Bambini" ng-model="stopPoint.bambini" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.bambini = button.value" ng-class="{'active' : button.value === stopPoint.bambini}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.picnic</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Picnic" ng-model="stopPoint.picnic" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.picnic = button.value" ng-class="{'active' : button.value === stopPoint.picnic}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.animali</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Animali" ng-model="stopPoint.animali" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.animali = button.value" ng-class="{'active' : button.value === stopPoint.animali}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.fermata</span>
				  	<div class="button-bar">
				  		<input type="hidden" name="Fermata" ng-model="stopPoint.fermata" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.fermata = button.value" ng-class="{'active' : button.value === stopPoint.fermata}">{{button.text}}</a>
					</div>
				</div>
				<div class="item item-stacked-label padding-right">
					<span class="input-label" translate>label.wifi</span>
				  	<div class="button-bar">
						<input type="hidden" name="Wifi" ng-model="stopPoint.wifi" />
						<a class="button button-small button-light" ng-repeat="button in clientSideList" ng-click="stopPoint.wifi = button.value" ng-class="{'active' : button.value === stopPoint.wifi}">{{button.text}}</a>
					</div>
				</div>
			</div>
			<div class="list padding-left padding-right">
				<button class="item button button-block button-positive" ng-click="modifyStopPoint(formModify)" translate>button.conferma</button>
			</div>
		</form>
	</ion-content>
</ion-view>